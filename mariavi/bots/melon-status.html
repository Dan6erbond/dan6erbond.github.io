<style>
  @import url('https://fonts.googleapis.com/css?family=Nunito+Sans');

  :root {
    font-family: Nunito Sans;
  }

  div {
    display: flex;
    border: none;
  }

  img {
    width: 50px;
    height: auto;
    align-self: center;
  }

  #status, p {
    padding: 0;
    margin: 0;
  }

  #status {
    margin: 25px 0px 0px 20px;
  }

  .led {
    margin-top: 5px;
    margin-right: 5px;
    flex: 1;
    display: inline-block;
    border-radius: 50%;
    height: 10px;
    width: 10px;
  }

  .green {
    background-color: green;
  }

  .red {
    background-color: red;
  }
</style>

<div class="bot">
  <div style="display: block;">
    <a href="https://discordapp.com/oauth2/authorize?client_id=563957035763236864&scope=bot&permissions=8" style="display: block;">
      <img src="../img/melon/melon.png" alt="">
    </a>
    <p style="display: block;width: 100%; text-align: center;margin: 0; padding: 0;">Melon</p>
  </div>

  <div id="status">
    <div class="led">

    </div>
    <p style="" id="stat"></p>
  </div>
</div>

<script type="text/javascript">
  var url = new URL(document.location.href).searchParams;
  if (url.get("textColor") != null){
    ps = document.getElementsByTagName("p");
    for (i in ps){
      if (ps[i].style != null){
        ps[i].style.color = url.get("textColor");
      }
    }
  }

  var xmlhttp = new XMLHttpRequest();

  xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      var bots = JSON.parse(this.responseText);
      diff = (new Date() - new Date(bots["melon"] * 1000)) / 1000 / 60;

      if (diff < 10){
        document.getElementById("stat").innerHTML = "Online";
        document.getElementsByClassName("led")[0].classList.add("green");
      } else {
        document.getElementById("stat").innerHTML = "Offline";
        document.getElementsByClassName("led")[0].classList.add("red");
      }
    }
  };

  xmlhttp.open("GET", "https://api.myjson.com/bins/1f1baf", true);
  xmlhttp.send();
</script>
